<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Network Dashboard","image":"https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress\u0026cs=tinysrgb\u0026w=1260\u0026h=750\u0026dpr=2","datePublished":"2023-04-03T18:28:20+05:30","dateModified":"2023-04-03T18:28:20+05:30","author":{"@type":"Person","name":"Sohan Rai","image":"https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3\u0026ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\u0026auto=format\u0026fit=crop\u0026w=3474\u0026q=80"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/sohanrai09.github.io\/new-blog\/2023\/04\/network-dashboard\/"},"publisher":{"@type":"Organization","name":"Home","logo":{"@type":"ImageObject","url":"https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3\u0026ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\u0026auto=format\u0026fit=crop\u0026w=3474\u0026q=80"}},"description":"In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I\u0026rsquo;m quite sure that if you have been exploring the network automation world, you would have come across Nornir already. And similarly there is a very good chance that you have also come across Rich, which is in my opinion one of the coolest libraries out there!","keywords":["tech"]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.119.0 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Sohan Rai"><meta name=keywords content="tech"><meta name=description content="In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I&rsquo;m quite sure that if you have been exploring the network automation world, you would have come across Nornir already. And similarly there is a very good chance that you have also come across Rich, which is in my opinion one of the coolest libraries out there!"><meta property="og:description" content="In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I&rsquo;m quite sure that if you have been exploring the network automation world, you would have come across Nornir already. And similarly there is a very good chance that you have also come across Rich, which is in my opinion one of the coolest libraries out there!"><meta property="og:type" content="article"><meta property="og:title" content="Network Dashboard"><meta name=twitter:title content="Network Dashboard"><meta property="og:url" content="https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/"><meta property="twitter:url" content="https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/"><meta property="og:site_name" content="Home"><meta property="og:description" content="In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I&rsquo;m quite sure that if you have been exploring the network automation world, you would have come across Nornir already. And similarly there is a very good chance that you have also come across Rich, which is in my opinion one of the coolest libraries out there!"><meta name=twitter:description content="In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I&rsquo;m quite sure that if you have been exploring the network automation world, you would have come across Nornir already. And similarly there is a very good chance that you have also come across Rich, which is in my opinion one of the coolest libraries out there!"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2023-04-03T18:28:20"><meta property="article:modified_time" content="2023-04-03T18:28:20"><meta property="article:section" content="rich"><meta property="article:section" content="python"><meta property="article:tag" content="python"><meta property="article:tag" content="rich"><meta name=twitter:card content="summary"><meta property="og:image" content="https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=3474&q=80"><meta property="twitter:image" content="https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=3474&q=80"><meta property="og:image" content="https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"><meta property="twitter:image" content="https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"><meta property="og:image" content="https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"><meta property="twitter:image" content="https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"><title>Network Dashboard</title><link rel=icon href=https://sohanrai09.github.io/new-blog/favicon.png><link rel=canonical href=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://sohanrai09.github.io/new-blog/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://sohanrai09.github.io/new-blog/ aria-label="Go to homepage">Home</a></div><a class=header-right-picture href=https://sohanrai09.github.io/new-blog/#about aria-label="Open the link: /#about"><img class=header-picture src="https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=3474&amp;q=80" alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=https://sohanrai09.github.io/new-blog/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src="https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=3474&amp;q=80" alt="Author's picture"></a><h4 class=sidebar-profile-name>Sohan Rai</h4><h5 class=sidebar-profile-bio>Network Engineer exploring the Network Automation world</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://sohanrai09.github.io/new-blog/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sohanrai09.github.io/new-blog/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sohanrai09.github.io/new-blog/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sohanrai09.github.io/new-blog/#about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sohanrai09 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/sohan-rai-01a91488/ target=_blank rel=noopener title=Linkedin><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>Linkedin</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://twitter.com/SohanRai23 target=_blank rel=noopener title=Twitter><i class="sidebar-button-icon fab fa-lg fa-twitter" aria-hidden=true></i>
<span class=sidebar-button-desc>Twitter</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div class="post-header-cover
text-left" style="background-image:url(https://images.pexels.com/photos/6366444/pexels-photo-6366444.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=1260&amp;h=750&amp;dpr=2)" data-behavior=4><div class="post-header main-content-wrap text-left"><h1 class=post-title>Network Dashboard</h1><div class="postShorten-meta post-meta"><time datetime=2023-04-03T18:28:20+05:30>April 3, 2023</time>
<span>in</span>
<a class=category-link href=https://sohanrai09.github.io/new-blog/categories/rich>rich</a>,
<a class=category-link href=https://sohanrai09.github.io/new-blog/categories/python>python</a></div></div></div><div id=main data-behavior=4 class="hasCover
hasCoverMetaIn"><article class=post id=top><div class="post-content markdown"><div class=main-content-wrap><p>In this blog post I will be going through how I went about building a Network Dashboard using couple of my favorite Python libraries, Nornir and Rich. I&rsquo;m quite sure that if you have been exploring the network automation world, you would have come across <a href=https://nornir.readthedocs.io/en/latest/>Nornir</a> already. And similarly there is a very good chance that you have also come across <a href=https://rich.readthedocs.io/en/stable/introduction.html>Rich</a>, which is in my opinion one of the coolest libraries out there! If you are someone who loves working in CLI, like I do, you will absolutely love Rich!</p><p>Nornir is a pure python framework which makes use of <a href=https://nornir.tech/nornir/plugins/>Plugins</a> to accomplish various tasks. As we go through this post you will see how these Plugins are super useful in getting things done and if you prefer to use a different plugin you can do so with minimal change. Like for instance, I will be using the Juniper PyEZ plugin to interact and fetch details from the routers, you can instead use Napalm, Netmiko, etc as per your convenience. The <code>Inventory</code> is the critical part of Nornir and it is mainly comprised of hosts, groups and config files in yaml format. For my script, I will be using a very basic version of Inventory, you can get really creative to make it very robust as per your needs.</p><pre tabindex=0><code>(venv) sohanr@sohanr-mbp dashboard % tree
.
├── config.yaml
├── dashboard.py
├── groups.yaml
├── hosts.yaml
├── nornir.log
└── test.py

1 directory, 6 files
</code></pre><h3 id=hostsyaml>hosts.yaml</h3><p>In <code>hosts.yaml</code> file we define details of hosts we will be working with in our script.</p><pre tabindex=0><code>---
vMX1:
  hostname: vmx1.norn.lab
  port: 31003
  groups:
    - nos
vMX2:
  hostname: vmx2.norn.lab
  port: 31006
  groups:
    - nos
vMX3:
  hostname: vmx3.norn.lab
  port: 31009
  groups:
    - nos
</code></pre><h3 id=groupsyaml>groups.yaml</h3><p>In <code>groups.yaml</code> file we define any group specific attributes, this can include any login information, platform information, etc</p><pre tabindex=0><code>---
devices:
  username: username1
  password: Password1
nos:
  platform: junos
  groups:
    - devices
</code></pre><h3 id=configyaml>config.yaml</h3><p>Everything comes together in a <code>config.yaml</code> file, where you can define pointers to your hosts and group files.</p><pre tabindex=0><code>---
inventory:
    options:
        host_file: &#34;hosts.yaml&#34;
        group_file: &#34;groups.yaml&#34;
runner:
    options:
        num_workers: 10
</code></pre><h3 id=end-goal>End Goal</h3><p>Before we dive into the script, let&rsquo;s look at the end result so that we can then break things down to sections to tackle it one by one.</p><p><img src=https://sohanrai09.github.io/new-blog/images/dashboard_1.png alt=dashboard_1>
<img src=https://sohanrai09.github.io/new-blog/images/dashboard_2.png alt=dashboard_2></p><p>There are two main sections to the script, one is retrieving the necessary data from the routers and two, building the dashboard itself. As mentioned in the beginning of this post, I will be using Junos PyEZ to fetch the network data. PyEZ offers RPCs to fetch network information in structured format which then makes it easy for us to navigate through the data to get the required information. Let&rsquo;s take a look at one example where we try to fetch the BGP information from the network.</p><h3 id=pyez-rpc-in-nornir>PyEZ RPC in Nornir</h3><p>In this example, we will be using a <code>task</code> named <code>pyez_rpc</code> in the PyEZ plugin for RPC. For more information on the plugin, please refer to the documentation <a href=https://nornir-pyez.readthedocs.io/en/latest/>here</a>.</p><pre tabindex=0><code>(venv) sohanr@sohanr-mbp dashboard % python
Python 3.9.6 (default, Sep 26 2022, 11:37:49) 
[Clang 14.0.0 (clang-1400.0.29.202)] on darwin
Type &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.
&gt;&gt;&gt; from nornir import InitNornir
&gt;&gt;&gt; from nornir_pyez.plugins.tasks import pyez_rpc
&gt;&gt;&gt; nr = InitNornir()
&gt;&gt;&gt; output = nr.run(task=pyez_rpc, func=&#39;get-bgp-summary-information&#39;)
&gt;&gt;&gt; output
AggregatedResult (pyez_rpc): {&#39;vMX1&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;], &#39;vMX2&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;], &#39;vMX3&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;]}
&gt;&gt;&gt; 
</code></pre><p>Nornir returns the result as an <a href=https://nornir.readthedocs.io/en/latest/tutorial/task_results.html>Aggregated Result</a> object, which is a dict-like object we can iterate over to get the required information. Let&rsquo;s say I want to look into one of the host&rsquo;s data, I can do that as shown below.</p><pre tabindex=0><code>&gt;&gt;&gt; output
AggregatedResult (pyez_rpc): {&#39;vMX1&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;], &#39;vMX2&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;], &#39;vMX3&#39;: MultiResult: [Result: &#34;pyez_rpc&#34;]}
&gt;&gt;&gt; bgp_data = output[&#39;vMX1&#39;][0].result
&gt;&gt;&gt; bgp_data
{&#39;bgp-information&#39;: {&#39;bgp-thread-mode&#39;: &#39;BGP I/O&#39;, &#39;thread-state&#39;: None, &#39;default-ebgp-advertise-mode&#39;: &#39;accept&#39;, &#39;default-ebgp-receive-mode&#39;: &#39;accept&#39;, &#39;group-count&#39;: &#39;1&#39;, &#39;peer-count&#39;: &#39;2&#39;, &#39;down-peer-count&#39;: &#39;0&#39;, &#39;bgp-rib&#39;: {&#39;@style&#39;: &#39;brief&#39;, &#39;name&#39;: &#39;inet.0&#39;, &#39;total-prefix-count&#39;: &#39;0&#39;, &#39;received-prefix-count&#39;: &#39;0&#39;, &#39;accepted-prefix-count&#39;: &#39;0&#39;, &#39;active-prefix-count&#39;: &#39;0&#39;, &#39;suppressed-prefix-count&#39;: &#39;0&#39;, &#39;history-prefix-count&#39;: &#39;0&#39;, &#39;damped-prefix-count&#39;: &#39;0&#39;, &#39;total-external-prefix-count&#39;: &#39;0&#39;, &#39;active-external-prefix-count&#39;: &#39;0&#39;, &#39;accepted-external-prefix-count&#39;: &#39;0&#39;, &#39;suppressed-external-prefix-count&#39;: &#39;0&#39;, &#39;total-internal-prefix-count&#39;: &#39;0&#39;, &#39;active-internal-prefix-count&#39;: &#39;0&#39;, &#39;accepted-internal-prefix-count&#39;: &#39;0&#39;, &#39;suppressed-internal-prefix-count&#39;: &#39;0&#39;, &#39;pending-prefix-count&#39;: &#39;0&#39;, &#39;bgp-rib-state&#39;: &#39;BGP restart is complete&#39;}, &#39;bgp-peer&#39;: [{&#39;@style&#39;: &#39;terse&#39;, &#39;@heading&#39;: &#39;Peer                     AS      InPkt     OutPkt    OutQ   Flaps Last Up/Dwn State|#Active/Received/Accepted/Damped...&#39;, &#39;peer-address&#39;: &#39;10.100.100.2&#39;, &#39;peer-as&#39;: &#39;64522&#39;, &#39;input-messages&#39;: &#39;149&#39;, &#39;output-messages&#39;: &#39;149&#39;, &#39;route-queue-count&#39;: &#39;0&#39;, &#39;flap-count&#39;: &#39;0&#39;, &#39;elapsed-time&#39;: {&#39;@seconds&#39;: &#39;4024&#39;, &#39;#text&#39;: &#39;1:07:04&#39;}, &#39;peer-state&#39;: {&#39;@format&#39;: &#39;Establ&#39;, &#39;#text&#39;: &#39;Established&#39;}, &#39;bgp-rib&#39;: {&#39;@style&#39;: &#39;terse&#39;, &#39;name&#39;: &#39;inet.0&#39;, &#39;active-prefix-count&#39;: &#39;0&#39;, &#39;received-prefix-count&#39;: &#39;0&#39;, &#39;accepted-prefix-count&#39;: &#39;0&#39;, &#39;suppressed-prefix-count&#39;: &#39;0&#39;}}, {&#39;@style&#39;: &#39;terse&#39;, &#39;peer-address&#39;: &#39;10.100.100.3&#39;, &#39;peer-as&#39;: &#39;64522&#39;, &#39;input-messages&#39;: &#39;150&#39;, &#39;output-messages&#39;: &#39;150&#39;, &#39;route-queue-count&#39;: &#39;0&#39;, &#39;flap-count&#39;: &#39;0&#39;, &#39;elapsed-time&#39;: {&#39;@seconds&#39;: &#39;4024&#39;, &#39;#text&#39;: &#39;1:07:04&#39;}, &#39;peer-state&#39;: {&#39;@format&#39;: &#39;Establ&#39;, &#39;#text&#39;: &#39;Established&#39;}, &#39;bgp-rib&#39;: {&#39;@style&#39;: &#39;terse&#39;, &#39;name&#39;: &#39;inet.0&#39;, &#39;active-prefix-count&#39;: &#39;0&#39;, &#39;received-prefix-count&#39;: &#39;0&#39;, &#39;accepted-prefix-count&#39;: &#39;0&#39;, &#39;suppressed-prefix-count&#39;: &#39;0&#39;}}]}}
&gt;&gt;&gt; 
</code></pre><p>As you can see, we see a structured data being returned from the device and now we can navigate through it like we do with any dict-like object in python to get the desired information.</p><pre tabindex=0><code>&gt;&gt;&gt; total_peers = bgp_data[&#39;bgp-information&#39;][&#39;peer-count&#39;]
&gt;&gt;&gt; down_peers = bgp_data[&#39;bgp-information&#39;][&#39;down-peer-count&#39;]
&gt;&gt;&gt; 
&gt;&gt;&gt; total_peers
&#39;2&#39;
&gt;&gt;&gt; 
&gt;&gt;&gt; down_peers
&#39;0&#39;
&gt;&gt;&gt; 
</code></pre><p>Hopefully with this as a reference, you should be able to work your way through rest of the data retrieval code.</p><h3 id=building-dashboard-using-rich>Building Dashboard using Rich</h3><p>The easiest part in the dashboard is the <code>Progress Bars</code> we see at the top.</p><p><img src=https://sohanrai09.github.io/new-blog/images/prog_bars.png alt=prog_bars></p><p>I&rsquo;m using another Nornir Plugin to do this, called <a href=https://github.com/InfrastructureAsCode-ch/nornir_rich>Nornir_Rich</a>. It&rsquo;s very simple and straight forward to use but the results are really amazing! It is quite literally the best of two worlds, Rich and Nornir!</p><p>Next, I&rsquo;m using <a href=https://rich.readthedocs.io/en/stable/tables.html>Tables</a> to display the information gathered from the device. Let&rsquo;s take an example of <code>System Information</code> table.
<img src=https://sohanrai09.github.io/new-blog/images/sys_info_table.png alt=sys_info></p><pre tabindex=0><code>sys_info_table = Table(show_lines=True, show_header=False, box=box.ASCII, title=&#39;System Information&#39;)
sys_info_table.add_column(&#34;Field&#34;, justify=&#34;right&#34;, style=&#34;magenta&#34;, width=18)
sys_info_table.add_column(&#34;Details&#34;, style=&#34;cyan&#34;, width=50)
sys_info_table.add_row(&#39;SW version&#39;, version)
sys_info_table.add_row(&#39;Model&#39;, model)
sys_info_table.add_row(&#39;Serial Number&#39;, serial_num)
sys_info_table.add_row(&#39;RE0 uptime&#39;, re0_uptime)
sys_info_table.add_row(&#39;RE0 last reboot reason&#39;, re0_last_reboot_reason)
sys_info_table.add_row(&#39;RE1 uptime&#39;, re1_uptime)
sys_info_table.add_row(&#39;RE1 last reload reason&#39;, re1_last_reboot_reason)
</code></pre><p>Variables like <code>version</code>, <code>model</code>, etc are obtained by navigating through the <code>AggregatedResult</code> object, as explained earlier.</p><p>In the dashboard, <code>Memory & CPU Information</code> information is depicted in a rather interesting format. Underneath, it is still a <code>Table</code> but I&rsquo;m using <code>Emojis</code> to represent the values, this is how the code looks like.
<img src=https://sohanrai09.github.io/new-blog/images/mem_table.png alt=mem_table></p><pre tabindex=0><code>mem_cpu_table = Table(show_header=False, box=box.ASCII, width=50, title=&#39;Memory &amp; CPU Information&#39;)
mem_cpu_table.add_column(&#34;Field&#34;, justify=&#34;left&#34;, style=&#34;magenta&#34;)
if used_mem &gt; 20: # To reduce the number of emojis/diamonds displayed
    mem_cpu_table.add_row(&#34;:large_blue_diamond:&#34; * (int(int(used_mem)/5)) + f&#34; {used_mem}%&#34; + &#34;\n\n&#34;, style=&#39;cyan&#39;)
else:
    mem_cpu_table.add_row(&#34;:large_blue_diamond:&#34; * int(used_mem) + f&#34; {used_mem}%&#34; + &#34;\n\n&#34;,
                            style=&#39;cyan&#39;)
if int(cpu_usage) &gt; 20:
    mem_cpu_table.add_row(&#34;:large_orange_diamond:&#34; * (int(int(cpu_usage)/2)) + f&#34; {cpu_usage}%&#34; + &#34;\n\n\n&#34;,
                            style=&#39;magenta&#39;)
else:
    mem_cpu_table.add_row(&#34;:large_orange_diamond:&#34; * int(int(cpu_usage)) + f&#34; {cpu_usage}%&#34; + &#34;\n\n\n&#34;, style=&#39;magenta&#39;)
mem_cpu_table.add_row(&#34;:large_blue_diamond:  memory in-use\t:large_orange_diamond:  cpu in-use&#34;)
</code></pre><p>Once I have the 3 tables in place, I put them together in one single table. Note that <code>Memory & CPU Information</code> & <code>Commit Information</code> were merged together to form a single <code>mem_cpu_commit_table</code> table
<img src=https://sohanrai09.github.io/new-blog/images/first_row_table.png alt=first_row_table></p><pre tabindex=0><code># Everything comes together, all the tables are put into one main table, which is then rendered in a Panel
main_table = Table(show_lines=True, show_header=False)
main_table.add_column(justify=&#34;right&#34;, style=&#34;magenta&#34;)
main_table.add_column(justify=&#34;right&#34;, style=&#34;green&#34;)
main_table.add_column(justify=&#34;right&#34;, style=&#34;magenta&#34;)
main_table.add_row(sys_info_table, protocols_table, mem_cpu_commit_table)
</code></pre><p>Next, we make use of <a href=https://rich.readthedocs.io/en/stable/panel.html>Panels</a> to place our final table. We repeat the same procedure for all the hosts in our inventory and keep appending the panels of each host into a list named <code>panel_list</code>.</p><pre tabindex=0><code>panel = Panel(main_table, width=200,title=router, box=box.DOUBLE)
panel_list.append(panel)
</code></pre><p>Finally, we iterate over the <code>panel_list</code> and print the panels into the console using <code>console.print</code>. I would also like to highlight another element in the dashboard that appears when the script is building the dashboard (unfortunately the snapshot of the dashboard doesn&rsquo;t show it) i.e., <a href="https://rich.readthedocs.io/en/stable/reference/spinner.html?highlight=spinner">Spinner</a>. Spinners are nice when you want to display an animation when the script is executing a piece of code and awaiting completion.</p><p>I know that I skimmed over a lot of details but hopefully by going through one example of each of the elements used in the script, I&rsquo;ve given a basic idea of the logic and technique used to construct the dashboard. Please refer to the full code <a href=https://github.com/sohanrai09/My_Nornir/tree/main/dashboard>here</a> and if you have not used Rich yet, hopefully this is a starter for you to go on and explore more! While I&rsquo;ve been working on this, folks from Rich have released another mind blowing library called <a href=https://textual.textualize.io/>Textual</a> which takes working in the terminal to a whole another level! May be soon I will give that a go and post it here, until then goodbye!</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=https://sohanrai09.github.io/new-blog/tags/python/>python</a>
<a class="tag tag--primary tag--small" href=https://sohanrai09.github.io/new-blog/tags/rich/>rich</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sohanrai09.github.io/new-blog/2023/08/network-tui/ data-tooltip="Network TUI" aria-label="NEXT: Network TUI"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sohanrai09.github.io/new-blog/2022/08/robot-framework-3/ data-tooltip="Robot Framework 3" aria-label="PREVIOUS: Robot Framework 3"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2023 Sohan Rai. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sohanrai09.github.io/new-blog/2023/08/network-tui/ data-tooltip="Network TUI" aria-label="NEXT: Network TUI"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sohanrai09.github.io/new-blog/2022/08/robot-framework-3/ data-tooltip="Robot Framework 3" aria-label="PREVIOUS: Robot Framework 3"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://sohanrai09.github.io/new-blog/2023/04/network-dashboard/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fsohanrai09.github.io%2Fnew-blog%2F2023%2F04%2Fnetwork-dashboard%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fsohanrai09.github.io%2Fnew-blog%2F2023%2F04%2Fnetwork-dashboard%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fsohanrai09.github.io%2Fnew-blog%2F2023%2F04%2Fnetwork-dashboard%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src="https://images.unsplash.com/photo-1597733336794-12d05021d510?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=3474&amp;q=80" alt="Author's picture"><h4 id=about-card-name>Sohan Rai</h4><div id=about-card-bio>Network Engineer exploring the Network Automation world</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Network Engineer</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>India</div></div></div><div id=cover style=background-image:url(https://sohanrai09.github.io/new-blog/images/cover_img.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://sohanrai09.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>